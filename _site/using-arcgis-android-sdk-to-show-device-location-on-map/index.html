<!DOCTYPE html>
<html>
<head>
  <title>GISCollective</title>
  <meta http-equiv="content-type" charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:300,400,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300,600,900' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
  <link href="/public/style.css" rel="stylesheet">
</head>
<body>
  <div id="navbar">
  <div class="wrapper">
    <div id="branding">
      <div id="site-title"><h1><a href="/" title="GISC" rel="home">GISC</a></h1></div>
    </div>
    <nav id="nav">
      <button class="nav-expand"><i class="icon hamburger"></i></button>
      <ul id="menu-gisc-2" class="menu">
        <li id="menu-item-111" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-111"><a href="/">Home</a></li>
        <li id="menu-item-101" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-101"><a href="/tutorials/">Tutorials</a></li>
        <li id="menu-item-192" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-192"><a href="/resources/">Resources</a></li>
        <li id="menu-item-108" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-108"><a href="/about/">About</a></li>
      </ul>
    </nav>
  </div>
</div>
  <div class="wrapper hfeed">
  <div id="container">

<article id="content">
  <div class="post type-post status-publish format-standard hentry category-data">
    <h2 class="entry-title">
      <a href="/using-arcgis-android-sdk-to-show-device-location-on-map/" title="Using ArcGIS Android SDK to Show Device Location on Map" rel="bookmark">Using ArcGIS Android SDK to Show Device Location on Map</a>
    </h2>

    <div class="entry-content">
      <div class="entry-meta">
  <span class="meta-prep meta-prep-author">By </span>
  <span class="author"><a class="url fn n" href="/Chandler" title="View all articles by Irina Papuc">Chandler</a></span>
  <span class="meta-sep"> | </span>
  <span class="meta-prep meta-prep-entry-date">Published </span>
  <span class="entry-date"><abbr class="published" title="2016-01-05T16:50:01-0500">2013-07-23 09:11:54 -0700</abbr></span>
</div>

<p style="text-align: center;">
  <a href="http://giscollective.org/wp-content/uploads/2013/07/Screenshot_2013-07-23-13-43-21.png"><img class="aligncenter  wp-image-12022" alt="Screenshot_2013-07-23-13-43-21" src="http://giscollective.org/wp-content/uploads/2013/07/Screenshot_2013-07-23-13-43-21.png" width="324" height="576" /></a>
</p>

<p>So after spending WAY too much time looking for a simple tutorial to show how to add a device’s location to an Android App using the ArcGIS Android SDK, I decided to write one. This search caused me a lot of frustration and I imagine other new Android programmers have encountered the same thing. Follow these simple steps to add a device’s location to an Android App.</p>

<p>I added the project files to a <a href="https://github.com/csterling/deviceLocationOnMap">repository on GitHub</a> for your viewing pleasure. Be warned, the app is only written to work on Android 4.2 devices- you’ll need to change the minimum version in the manifest to run it on older devices.</p>

<p>I apologize for the code formatting. To see the code in its entire formatted beauty, check out the <a href="https://github.com/csterling/deviceLocationOnMap/blob/master/src/com/fuscoe/locationOnMapPractice/DeviceLocationOnMapActivity.java">.java file on github</a></p>

<p>PS If a tutorial/resource exists that shows how to simply add the location to an app, please share!</p>

<hr />

<p>To show the devices current location on a map, you need to utilize the [&lt;p style="text-align: center;"&gt;
  <a href="http://giscollective.org/wp-content/uploads/2013/07/Screenshot_2013-07-23-13-43-21.png"><img class="aligncenter  wp-image-12022" alt="Screenshot_2013-07-23-13-43-21" src="http://giscollective.org/wp-content/uploads/2013/07/Screenshot_2013-07-23-13-43-21.png" width="324" height="576" /></a>
&lt;/p&gt;</p>

<p>So after spending WAY too much time looking for a simple tutorial to show how to add a device’s location to an Android App using the ArcGIS Android SDK, I decided to write one. This search caused me a lot of frustration and I imagine other new Android programmers have encountered the same thing. Follow these simple steps to add a device’s location to an Android App.</p>

<p>I added the project files to a <a href="https://github.com/csterling/deviceLocationOnMap">repository on GitHub</a> for your viewing pleasure. Be warned, the app is only written to work on Android 4.2 devices- you’ll need to change the minimum version in the manifest to run it on older devices.</p>

<p>I apologize for the code formatting. To see the code in its entire formatted beauty, check out the <a href="https://github.com/csterling/deviceLocationOnMap/blob/master/src/com/fuscoe/locationOnMapPractice/DeviceLocationOnMapActivity.java">.java file on github</a></p>

<p>PS If a tutorial/resource exists that shows how to simply add the location to an app, please share!</p>

<hr />

<p>To show the devices current location on a map, you need to utilize the](https://developers.arcgis.com/en/android/api-reference/reference/com/esri/android/map/LocationService.html) class.</p>

<p>First of all, define the MapView in the standard onCreate method, and add the basemap (and any other layers):</p>

<pre><b>public</b> <b>void</b> onCreate(Bundle savedInstanceState) {&lt;/code&gt;

    <b>super</b>.onCreate(savedInstanceState);

    setContentView(R.layout.<i>main</i>);

    mMapView = (MapView) findViewById(R.id.<i>map</i>);

    mMapView.addLayer(<b>new</b> ArcGISTiledMapServiceLayer(<br />    "http://services.arcgisonline.com/ArcGIS/rest/services/<br />    World_Street_Map/MapServer"));
</pre>

<p>After the MapView has been created, add a setOnStatusChangedListener to it. Inside this method is where we will establish the LocationService via a new OnStatusChangedListener and a method called onStatusChanged.</p>

<pre>mMapView.setOnStatusChangedListener(<b>new</b> <span style="text-decoration: underline;">OnStatusChangedListener()</span> {&lt;/code&gt;

    <b>public</b> <b>void</b> onStatusChanged(Object source, STATUS status) {

        <b>if</b> (source == mMapView &amp;&amp; status == STATUS.<i>INITIALIZED</i>) {

            LocationService ls = mMapView.getLocationService();

            ls.setAutoPan(<b>false</b>);

            ls.start();
          }
       }
});
</pre>

<p> </p>

<p>Here is the full java (main) activity code to add your device’s location to your android application:</p>

<p> </p>

<pre><b>package</b> com.fuscoe.locationOnMapPractice;

&nbsp;

<b>import</b> android.app.Activity;

&nbsp;

<b>import</b> <span style="text-decoration: underline;">android.location.Location</span>;

<b>import</b> <span style="text-decoration: underline;">android.location.LocationListener</span>;

<b>import</b> android.os.Bundle;

&nbsp;

<b>import</b> com.esri.android.map.LocationService;

<b>import</b> com.esri.android.map.MapView;

<b>import</b> com.esri.android.map.ags.ArcGISTiledMapServiceLayer;

<b>import</b> com.esri.android.map.event.OnStatusChangedListener;

&nbsp;

<b>public</b> <b>class</b> LocationOnMapPracticeActivity <b>extends</b> Activity {

&nbsp;

    MapView mMapView;

&nbsp;

    /** Called when the activity is first created. */

    @Override

    <b>public</b> <b>void</b> onCreate(Bundle savedInstanceState) {

        <b>super</b>.onCreate(savedInstanceState);

        setContentView(R.layout.<i>main</i>);


        mMapView = (MapView) findViewById(R.id.<i>map</i>);

        mMapView.addLayer(<b>new</b> ArcGISTiledMapServiceLayer(

        "http://services.arcgisonline.com/ArcGIS/rest/services/<br />        World_Street_Map/MapServer"));

        mMapView.setOnStatusChangedListener(<br />            <b>new</b> <span style="text-decoration: underline;">OnStatusChangedListener()</span> {



        <b>public</b> <b>void</b> onStatusChanged(Object source, STATUS status) {

            <b>if</b> (source == mMapView &amp;&amp; status == STATUS.<i>INITIALIZED</i>) {

                LocationService ls = mMapView.getLocationService();

                ls.setAutoPan(<b>false</b>);

                ls.start();
             }
          }
      });
}


@Override

<b>protected</b> <b>void</b> onDestroy() {

    <b>super</b>.onDestroy();

}


@Override

<b>protected</b> <b>void</b> onPause() {

    <b>super</b>.onPause();

    mMapView.pause();

}

&nbsp;

@Override

<b>protected</b> <b>void</b> onResume() {

    <b>super</b>.onResume();

    mMapView.unpause();

  }

}</pre>

    </div>
  </div>
</article>

<aside id="sidebar">
  <p id="site-description">Collective spatial learning from students and professionals</p>
  <div id="primary" class="widget-area">

    <h3 class="widget-title">Categories</h3>
    <ul>
      <li>list of categories</li>
    </ul>

    <h3 class="widget-title">Recent posts</h3>
    <ul>
      <li>list of recent posts</li>
    </ul>

    <h3 class="widget-title">Archives</h3>
    <ul>
      <li>something that resembles the archives</li>
    </ul>
  </div>
</aside>

<div class="clear"></div>
</div>
<footer>
<div id="copyright">GISCollective.org, 2016</div>
</footer>
</div>
<script src="/public/gisc.js"></script>
</body>
</html>