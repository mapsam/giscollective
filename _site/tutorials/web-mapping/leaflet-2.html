<!DOCTYPE html>
<html>
<head>
  <title>GISCollective</title>
  <meta http-equiv="content-type" charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:300,400,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300,600,900' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
  <link href="/public/style.css" rel="stylesheet">
</head>
<body>
  <div id="navbar">
  <div class="wrapper">
    <div id="branding">
      <div id="site-title"><h1><a href="/" title="GISC" rel="home">GISC</a></h1></div>
    </div>
    <nav id="nav">
      <button class="nav-expand"><i class="icon hamburger"></i></button>
      <ul id="menu-gisc-2" class="menu">
        <li id="menu-item-111" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-111"><a href="/">Home</a></li>
        <li id="menu-item-101" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-101"><a href="/tutorials/">Tutorials</a></li>
        <li id="menu-item-192" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-192"><a href="/resources/">Resources</a></li>
        <li id="menu-item-108" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-108"><a href="/about/">About</a></li>
      </ul>
    </nav>
  </div>
</div>
  <div class="wrapper hfeed">
  <div id="container">

<article id="content">
  <div class="post type-post status-publish format-standard hentry category-data">
    <h2 class="entry-title">
      <a href="/tutorials/web-mapping/leaflet-2" title="Leaflet: GeoJSON Data" rel="bookmark">Leaflet: GeoJSON Data</a>
    </h2>

    <div class="entry-content">
      <p><strong>UPDATE 8/9/2013:</strong> This tutorial has been updated to reflect the <strong>0.6.4</strong> version API for leaflet.js</p>

<h2 id="adding-a-geojson-layer">Adding a GeoJSON layer</h2>

<p>First we need to get some data. We’ll just use a simple dataset of world country borders from <a href="https://github.com/johan/world.geo.json">Johan Sundström’s collection</a> on github. You can also use shapefile data and convert it to geojson using some different conversion techniques (i.e. <a href="http://giscollective.org/tutorials/gis-techniques/spatial-data-conversion-using-python/">GDAL &amp; OGR</a>). Save it to the same directory as your index page for the leaflet map. It is important that you change the extension from <code class="highlighter-rouge">.json</code> to <code class="highlighter-rouge">.js</code> for this to work and link it in your <code class="highlighter-rouge">index.html</code> <strong>after</strong> your <code class="highlighter-rouge">leaflet.js</code> file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;script src="countries.js" type="text/javascript"&gt;&lt;/script&gt;
</code></pre>
</div>

<p>Within your geojson file (<code class="highlighter-rouge">countries.js</code>) you want to set the entire geojson as a variable so it is accessible from within your script.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var countries = {"type":"FeatureCollection", ... // rest of geojson
</code></pre>
</div>

<p>Once you have your <code class="highlighter-rouge">index.html</code> linking to the correct <code class="highlighter-rouge">.js</code> files and you have your <a href="http://giscollective.org/tutorials/web-mapping/leaflet-1/">leaflet basemap</a> rendering properly, we can import the geojson via the <code class="highlighter-rouge">L.geoJson</code> function in leaflet.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>L.geoJson(countries, {
    // other variables (not required)
}).addTo(map);
</code></pre>
</div>

<p>Simple as pie. <code class="highlighter-rouge">countries</code> was defined in your <code class="highlighter-rouge">countries.js</code> file that contains your geojson, remember. This will assign some generic styles to the data.</p>

<h2 id="geojson-style--interaction">GeoJSON Style &amp; Interaction</h2>

<p>Above you can see that <code class="highlighter-rouge">L.geoJson</code> allows for additional variables to be defined in addition to adding the GeoJSON to the map. This is where you give the data its styles and functionality on user interactions. You may want to style your data by assigning those styles to a variable:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var countryStyle = {
    'color': '#000',
    'weight': 5,
    'opacity': 0.6
};
</code></pre>
</div>

<p>You may also want to add some UI functionality by defining a function that dives into the properties data of your GeoJSON feature. The following is using Leaflet’s core popup functionality:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function popup(feature, layer) {
    if (feature.properties &amp;&amp; feature.properties.name) {
        layer.bindPopup(feature.properties.name);
    }
}
</code></pre>
</div>

<p>This function checks to make sure the <code class="highlighter-rouge">properties</code> portion of the GeoJSON exists as well as the property <code class="highlighter-rouge">name</code>, which is unique to the data file. The <code class="highlighter-rouge">layer.bindPopup</code> function inherently builds the click functionality into the map. Your code will now look something like the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>L.geoJson(countries, {
    onEachFeature: popup, // onEachFeature is built in
    style: countryStyle
}).addTo(map);
</code></pre>
</div>

<p>That’s that! You can see that <code class="highlighter-rouge">onEachFeature</code> is a property of the <code class="highlighter-rouge">L.geoJson</code> that can be passed with a function. Make sure to <a href="http://bl.ocks.org/svmatthews/6197016">view the working file</a> on bl.ocks.org.</p>

<p><a href="http://giscollective.org/tutorials/web-mapping/leaflet-1/">&lt;- Leaflet: Setup &amp; Basemap</a></p>

    </div>
  </div>
</article>

<aside id="sidebar">
  <p id="site-description">Collective spatial learning from students and professionals</p>
  <div id="primary" class="widget-area">

    <h3 class="widget-title">Categories</h3>
    <ul>
      <li>list of categories</li>
    </ul>

    <h3 class="widget-title">Recent posts</h3>
    <ul>
      <li>list of recent posts</li>
    </ul>

    <h3 class="widget-title">Archives</h3>
    <ul>
      <li>something that resembles the archives</li>
    </ul>
  </div>
</aside>

<div class="clear"></div>
</div>
<footer>
<div id="copyright">GISCollective.org, 2016</div>
</footer>
</div>
<script src="/public/gisc.js"></script>
</body>
</html>